<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hunt for Numbers Game</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/game.css">
</head>
<body>
    <div id="profileContainer" style="position: absolute; top: 0; right: 0;">
        <div id="profile">
            <img id="avatar" src="../assets/default-avatar.png" alt="Avatar">
            <span id="pirateName">Guest</span>
        </div>
        <button id="logoutButton" class="logout-button">Logout</button>
        <button id="dashboardButton" class="dashboard-button">Dashboard</button>
    </div>
    <div id="gameContainer">
        <h1>Hunt for Numbers Game</h1>
        <div id="stats">
            <p>Level: <span id="level">1</span></p>
            <p>Hearts: <span id="lives">4</span></p>
            <p>Treasures Collected: <span id="treasure-collected">0</span></p>
        </div>
        <div id="problemContainer">
            <img id="math-image" src="" alt="Math Problem">
            <div id="math-question" style="display: none;"></div>
            <input type="text" id="answer-input" placeholder="Enter your answer">
            <button id="submit-answer">Submit Answer</button>
        </div>
        <div id="timer">Time Left: 60 seconds</div>
        <div id="feedback-message"></div>
        <div id="player-stats"></div>
        <audio id="correct-sound" src="../assets/correct.mp3"></audio>
        <audio id="wrong-sound" src="../assets/wrong.mp3"></audio>
        <audio id="treasure-sound" src="../assets/treasure.mp3"></audio>
        <audio id="game-over-sound" src="../assets/game-over.mp3"></audio>
    </div>

  
    <div id="confirmationModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <p>Are you sure you want to go back to the dashboard?</p>
            <button id="confirmYes" class="confirm-button">Yes</button>
            <button id="confirmNo" class="confirm-button">No</button>
        </div>
    </div>

    <script src="../js/game.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const displayName = localStorage.getItem('displayName') || 'Guest';
            const avatarUrl = localStorage.getItem('avatarUrl') || '../assets/default-avatar.png';

            document.getElementById('pirateName').innerText = displayName;
            document.getElementById('avatar').src = avatarUrl;

            document.getElementById('logoutButton').addEventListener('click', function() {
                localStorage.removeItem('displayName');
                localStorage.removeItem('avatarUrl');
                localStorage.removeItem('username');
                localStorage.setItem('guestMode', 'true');
                window.location.href = "../html/auth.html";
            });

            const dashboardButton = document.getElementById('dashboardButton');
            const confirmationModal = document.getElementById('confirmationModal');
            const closeButton = document.querySelector('.close-button');
            const confirmYes = document.getElementById('confirmYes');
            const confirmNo = document.getElementById('confirmNo');

            dashboardButton.addEventListener('click', function() {
                confirmationModal.style.display = 'block';
            });

            closeButton.addEventListener('click', function() {
                confirmationModal.style.display = 'none';
            });

            confirmYes.addEventListener('click', function() {
                window.location.href = "../html/dashboard.html";
            });

            confirmNo.addEventListener('click', function() {
                confirmationModal.style.display = 'none';
            });

            window.onclick = function(event) {
                if (event.target === confirmationModal) {
                    confirmationModal.style.display = 'none';
                }
            };

            // Dark Mode Toggle
            const themeToggle = document.getElementById('themeToggle');
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
            });
        });
    </script>
</body>
</html>
